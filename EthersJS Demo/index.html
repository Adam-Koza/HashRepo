<html>

<body>
    <script charset="utf-8"
        src="https://cdn.ethers.io/scripts/ethers-v4.min.js"
        type="text/javascript">
    </script>
    <script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js/dist/web3.min.js"></script>


    <a id="fakeButton" href="javascript:newHashRepo();"></a>
    <button onclick="getRepoID()">Get RepoID</button>
    <button onclick="newHashRepo()">New Hash Repo</button>


    <script> 
        var provider = new ethers.providers.Web3Provider(web3.currentProvider,'rinkeby');

        var HashRepoContractAddress = "0x924101dd98dac8501ed82fb162a75ba2c459f44d";
        var HashRepoContractABI = [{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"repoInfo","outputs":[{"name":"repoMaster","type":"address"},{"name":"name","type":"string"},{"name":"commitCount","type":"uint256"},{"name":"isPrivate","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_repoID","type":"uint256"},{"name":"_commitHash","type":"string"},{"name":"_commitMessage","type":"string"}],"name":"sendCommit","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_repoID","type":"uint256"},{"name":"_add","type":"address"}],"name":"AddToWhiteList","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"repoID","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_repoID","type":"uint256"},{"name":"_remove","type":"address"}],"name":"RemoveFromWhiteList","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_name","type":"string"},{"name":"_private","type":"bool"}],"name":"newHashRepo","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"}];
        var HashRepoContract;
        

        provider.listAccounts().then(function(accounts) {
            signer = provider.getSigner(accounts[0]);
            HashRepoContract = new ethers.Contract(HashRepoContractAddress, HashRepoContractABI, signer);
        })

        function getRepoID() {
            HashRepoContract.repoID(getHashRepoPromise)
            .then(console.log(getHashRepoPromise));
            
        }


        async function newHashRepo(){
            newHashRepoPromise = HashRepoContract.newHashRepo("Yelp", false);
            await newHashRepoPromise;
        }

    </script>

</body>
</html>
